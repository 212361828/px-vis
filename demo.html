<!doctype html>

<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>px-vis Demo</title>
        <!-- Requires Webcomponents.js polyfill is provided by the page for browsers that don't support html imports -->
        <script src="../webcomponentsjs/webcomponents-lite.min.js"></script>
        <!-- Import custom element. Note: see comment about relative paths to dependencies in the *.html file referenced below -->
        <link rel="import" href="../px-theme/px-theme.html"/>

        <link rel="import" href="px-vis-axis.html">
        <link rel="import" href="px-vis-brush.html">
        <link rel="import" href="px-vis-chart-navigator.html">
        <link rel="import" href="px-vis-cursor.html">
        <link rel="import" href="px-vis-data.html">
        <link rel="import" href="px-vis-event.html">
        <link rel="import" href="px-vis-gridlines.html">
        <link rel="import" href="px-vis-interaction-space.html">
        <link rel="import" href="px-vis-line.html">
        <link rel="import" href="px-vis-register.html">
        <link rel="import" href="px-vis-scale.html">
        <link rel="import" href="px-vis-scatter.html">
        <link rel="import" href="px-vis-svg.html">
        <link rel="import" href="px-vis-threshold.html">
        <link rel="import" href="px-vis-tooltip.html">
        <link rel="import" href="px-vis-zoom.html">

        <link rel="stylesheet" type="text/css" href="css/px-vis-demo.css"/>
        <style>
          hr {
            height: 1px;
            border: 0;
            background: #cccccc;
          }
        </style>
    </head>

    <body>

      <hr />
      <template is="dom-bind" id="demo">
        <template is="dom-repeat" items="{{demos}}">
          <template is="dom-bind" item="[[item]]">
            <div class="layout u-ml u-mr">
              <h3>[[item.title]]</h3>
            </div>
            <div class="layout u-ml u-mr u-mb+">
              <div class="layout__item u-ml u-mr u-mb+">
                <strong>Description</strong>
                <template is="dom-repeat" items="{{item.descriptionText}}" as="text">
                  <br /><br />
                  [[text]]
                </template>
                <br /><br />
                <i>[[item.note]]</i>
              </div>

              <div class="layout__item u-ml u-mr u-mb+">
                <strong>Element Configuration</strong>
                <br/><br/>
                <div class="code">
                  <div>&lt;px-vis-[[item.elemType]]</div>
                  <template is="dom-repeat" items="[[item.config]]" as="config">
                    <div class="u-ml+">[[config.name]]="[[config.value]]"</div>
                  </template>
                  <div class="u-ml+">&gt;</div>
                  <div>&lt;/px-vis-[[item.elemType]]&gt;</div>
                </div>
              </div>

              <div class="layout__item  u-ml u-mr">
                <strong>Example chart</strong>
                <br/><br/>
                <template is="dom-if" if="{{item.svg}}">
                  <px-vis-svg
                    width="[[item.basic.width]]"
                    height="[[item.basic.height]]"
                    margin="[[item.basic.margin]]"
                    svg="{{svg}}">
                  </px-vis-svg>
                  <px-vis-scale
                    x-scale="time"
                    y-scale="linear"
                    width="[[item.basic.width]]"
                    height="[[item.basic.height]]"
                    margin="[[item.basic.margin]]"
                    chart-data={{item.basic.chartData}}
                    x="{{x}}"
                    y="{{y}}"
                    current-domain-x="{{currentDomainX}}"
                    current-domain-y="{{currentDomainY}}">
                  </px-vis-scale>
                </template>
                <template is="dom-if" if="{{item.line}}">
                  <px-vis-line
                    svg="[[svg]]"
                    series-id="mySeries"
                    series-number="0"
                    chart-data="[[item.basic.chartDataSeries]]"
                    x="[[x]]"
                    y="[[y]]"
                    current-domain-x="[[currentDomainX]]"
                    current-domain-y="[[currentDomainY]]">
                  </px-vis-line>
                </template>
                <template is="dom-if" if="{{item.scatter}}">
                  <px-vis-scatter
                    svg="[[svg]]"
                    series-id="mySeries"
                    series-number="0"
                    chart-data="[[item.basic.chartDataSeries]]"
                    x="[[x]]"
                    y="[[y]]"
                    current-domain-x="[[currentDomainX]]"
                    current-domain-y="[[currentDomainY]]">
                  </px-vis-scatter>
                </template>

                <template is="dom-if" if="{{item.xaxis}}">
                  <px-vis-axis
                    svg="[[svg]]"
                    axis="[[x]]"
                    margin="[[item.basic.margin]]"
                    title="myTitle"
                    orientation="bottom"
                    label-position="after"
                    current-domain="[[currentDomainX]]">
                  </px-vis-axis>
                </template>
                <template is="dom-if" if="{{item.yaxis}}">
                  <px-vis-axis
                    svg="[[svg]]"
                    axis="[[y]]"
                    margin="[[item.basic.margin]]"
                    title="myTitle"
                    orientation="left"
                    chart-data="[[item.basic.chartData]]"
                    current-domain="[[currentDomainY]]">
                  </px-vis-axis>
                </template>

                <template is="dom-if" if="{{item.gridlinesX}}">
                  <px-vis-gridlines
                    svg="[[svg]]"
                    axis="[[x]]"
                    margin="[[item.basic.margin]]"
                    length="[[item.basic.height]]"
                    orientation="bottom"
                    current-domain="[[currentDomainX]]">
                  </px-vis-gridlines>
                </template>

                <template is="dom-if" if="{{item.gridlinesY}}">
                  <px-vis-gridlines
                    svg="[[svg]]"
                    axis="[[y]]"
                    margin="[[item.basic.margin]]"
                    length="[[item.basic.width]]"
                    orientation="left"
                    current-domain="[[currentDomainY]]">
                  </px-vis-gridlines>
                </template>

                <template is="dom-if" if="{{item.event}}">
                  <px-vis-event
                    svg="[[svg]]"
                    event-id="[[item.event1.id]]"
                    chart-data="[[item.event1]]"
                    x="[[x]]"
                    y="[[y]]"
                    event-config="[[item.eventConfig]]"
                    current-domain-x="[[currentDomainX]]"
                    current-domain-y="[[currentDomainY]]">
                  </px-vis-event>
                  <px-vis-event
                    svg="[[svg]]"
                    event-id="[[item.event2.id]]"
                    chart-data="[[item.event2]]"
                    x="[[x]]"
                    y="[[y]]"
                    event-config="[[item.eventConfig]]"
                    current-domain-x="[[currentDomainX]]"
                    current-domain-y="[[currentDomainY]]">
                  </px-vis-event>
                  <px-vis-event
                    svg="[[svg]]"
                    event-id="[[item.event3.id]]"
                    chart-data="[[item.event3]]"
                    x="[[x]]"
                    y="[[y]]"
                    event-config="[[item.eventConfig]]"
                    current-domain-x="[[currentDomainX]]"
                    current-domain-y="[[currentDomainY]]">
                  </px-vis-event>
                  <px-vis-event
                    svg="[[svg]]"
                    event-id="[[item.event4.id]]"
                    chart-data="[[item.event4]]"
                    x="[[x]]"
                    y="[[y]]"
                    event-config="[[item.eventConfig]]"
                    current-domain-x="[[currentDomainX]]"
                    current-domain-y="[[currentDomainY]]">
                  </px-vis-event>
                </template>

                <template is="dom-if" if="{{item.threshold}}">
                  <px-vis-threshold
                    svg="[[svg]]"
                    chart-data="[[item.thresholdData]]"
                    x="[[x]]"
                    y="[[y]]"
                    current-domain-x="[[currentDomainX]]"
                    current-domain-y="[[currentDomainY]]">
                  </px-vis-threshold>
                  <px-vis-line
                    svg="[[svg]]"
                    series-id="mySeries"
                    series-number="0"
                    chart-data="[]"
                    x="[[x]]"
                    y="[[y]]"
                    current-domain-x="[[currentDomainX]]"
                    current-domain-y="[[currentDomainY]]">
                  </px-vis-line>
                </template>

                <template is="dom-if" if="{{item.navigator}}">
                  <px-vis-chart-navigator
                    x-scale="time"
                    y-scale="linear"
                    width="[[item.basic.width]]"
                    height="100"
                    margin="[[item.basic.margin]]"
                    chart-data="[[item.basic.chartData]]">
                  </px-vis-chart-navigator>
                </template>

              </div>
            </div>
            <hr />
        </template>
      </template>
    </template>
        <!-- /Line -->

      <script>
        var basic = {
          width : 300,
          height : 200,
          margin : {
            "top": 5,
            "right": 5,
            "bottom": 5,
            "left": 5
          },
          marginCode : '{ \
            "top": 5,\
            "right": 5,\
            "bottom": 5,\
            "left": 5\
          }',
          chartData : [{
            "series": [
              [1397102460000, 0.56],
              [1397139660000, 0.4],
              [1397177400000, 0.43],
              [1397228040000, 0.33],
              [1397248260000, 0.47],
              [1397291280000, 0.41],
              [1397318100000, 0.26],
              [1397342100000, 0.42],
              [1397390820000, 0.27],
              [1397408100000, 0.38],
              [1397458800000, 0.36],
              [1397522940000, 0.32]
            ]
          }],
          chartDataCode : '[ {...} , {...} ]',
          chartDataSeriesCode : '{ \
            series: [ \
              [1397102460000, 0.56],\
              [1397139660000, 0.4], \
              ...\
            ] }'
        };
        basic.chartDataSeries = basic.chartData[0];


        var demos = [];
// SVG #############################################################################################
        demos.push({
          "title": "px-vis-svg",
          "descriptionText" : [
            "All charts need a drawing space SVG component. These cannot be seen but provide the basic framework for drawing objects to be displayed.",
            "The svg component provides the drawing space and d3 instantiated drawing object.",
            "The svg component returns an 'svg' variable to be passed into drawing components."
          ],
          "note":"Note: All the subsequent charts will have this component, but they will not be shown in the code snippet.",
          "elemType" : "svg",
          "svg" : true,
          "config" : [
            { 'name':'width', 'value':basic.width },
            { 'name':'height', 'value':basic.height },
            { 'name':'margin', 'value':basic.marginCode }
          ],
          "basic":basic
        });

// Scale ###########################################################################################
        demos.push({
          "title": "px-vis-scale",
          "descriptionText" : [
            "All charts need an interpretor component. These cannot be seen but provide the basic framework for drawing objects to be displayed.",
            "Interpretor components convert data into drawing space coordinates.",
            "The scale component creates 'x' & 'y' and 'currentDomainX' & 'currentDomainY' variables which can be passed into drawing components."
          ],
          "note":"Note: All the subsequent charts will have this component, but they will not be shown in the code snippet.",
          "elemType" : "svg",
          "svg" : true,
          "config" : [
            { 'name':'x-scale', 'value':"time" },
            { 'name':'y-scale', 'value':'linear' },
            { 'name':'width', 'value':basic.width },
            { 'name':'height', 'value':basic.height },
            { 'name':'margin', 'value':basic.marginCode },
            { 'name':'chart-data', 'value':basic.chartDataCode }
          ],
          "basic":basic
        });

// LINE ############################################################################################
        demos.push({
          "title": "px-vis-line",
          "descriptionText" : ["Example of a line drawing object. Bound elements are set from other components, such as px-vis-svg and px-vis-scale, and passed into px-vis-line."],
          "elemType" : "line",
          "line" : true,
          "svg" : true,
          "config" : [
            { 'name':'svg', 'value':"[[svg]]" },
            { 'name':'series-id', 'value':"mySeries" },
            { 'name':'series-number', 'value':"0" },
            { 'name':'chart-data', 'value': basic.chartDataSeriesCode },
            { 'name':'x', 'value':"[[x]]" },
            { 'name':'y', 'value':"[[y]]" },
            { 'name':'current-domain-x', 'value':"[[currentDomainX]]" },
            { 'name':'current-domain-y', 'value':"[[currentDomainY]]" }
          ],
          "basic":basic
        });

// Scatter #########################################################################################
        demos.push({
          "title": "px-vis-scatter",
          "descriptionText" : ["Example of a scatter drawing object. Very similar configuration to px-vis-line."],
          "elemType" : "scatter",
          "scatter" : true,
          "svg" : true,
          "config" : [
            { 'name':'svg', 'value':"[[svg]]" },
            { 'name':'series-id', 'value':"mySeries" },
            { 'name':'series-number', 'value':"0" },
            { 'name':'chart-data', 'value': basic.chartDataSeriesCode },
            { 'name':'x', 'value':"[[x]]" },
            { 'name':'y', 'value':"[[y]]" },
            { 'name':'current-domain-x', 'value':"[[currentDomainX]]" },
            { 'name':'current-domain-y', 'value':"[[currentDomainY]]" }
          ],
          "basic":basic
        });

// X Axis ##########################################################################################
        demos.push({
          "title": "px-vis-axis : x-axis",
          "descriptionText" : [
            "Example of an axis drawing object.",
            "The axis drawing object can draw both x and y axis. This example draws an x-axis."
          ],
          "elemType" : "axis",
          "xaxis" : true,
          "svg" : true,
          "config" : [
            { 'name':'svg', 'value':"[[svg]]" },
            { 'name':'axis', 'value':"[[x]]" },
            { 'name':'margin', 'value':'{ \
              "top": 5,\
              "right": 5,\
              "bottom": 40,\
              "left": 5\
            }' },
            { 'name':'title', 'value':"myTitle" },
            { 'name':'orientation', 'value': "bottom" },
            { 'name':'label-position', 'value': "after" },
            { 'name':'current-domain', 'value':"[[currentDomainX]]" }
          ],
          "basic":JSON.parse(JSON.stringify(basic))
        });
        demos[demos.length-1]['basic']['margin']['bottom'] = 40;

// Y Axis ##########################################################################################
        demos.push({
          "title": "px-vis-axis : y-axis",
          "descriptionText" : [
            "Example of an axis drawing object.",
            "The axis drawing object can draw both x and y axis. This example draws an Y-axis."
          ],
          "elemType" : "axis",
          "yaxis" : true,
          "svg" : true,
          "config" : [
            { 'name':'svg', 'value':"[[svg]]" },
            { 'name':'axis', 'value':"[[y]]" },
            { 'name':'margin', 'value':'{ \
              "top": 5,\
              "right": 5,\
              "bottom": 5,\
              "left": 60\
            }' },
            { 'name':'title', 'value':"myTitle" },
            { 'name':'orientation', 'value': "left" },
            { 'name':'chart-data', 'value': basic.chartDataCode },
            { 'name':'current-domain', 'value':"[[currentDomainY]]" }
          ],
          "basic":JSON.parse(JSON.stringify(basic))
        });
        demos[demos.length-1]['basic']['margin']['left'] = 60;

// x gridlines #####################################################################################
        demos.push({
          "title": "px-vis-gridlines : x-axis",
          "descriptionText" : [
            "Chart gridlines can be added to either the x or the y axis"
          ],
          "elemType" : "gridlines",
          "gridlinesX" : true,
          "svg" : true,
          "config" : [
            { 'name':'svg', 'value':"[[svg]]" },
            { 'name':'axis', 'value':"[[x]]" },
            { 'name':'margin', 'value':basic.marginCode },
            { 'name':'length', 'value':basic.height },
            { 'name':'orientation', 'value': "bottom" },
            { 'name':'current-domain', 'value':"[[currentDomainX]]" }
          ],
          "basic":basic
        });

// Y gridlines #####################################################################################
        demos.push({
          "title": "px-vis-gridlines : y-axis",
          "descriptionText" : [
            "Chart gridlines can be added to either the x or the y axis"
          ],
          "elemType" : "gridlines",
          "gridlinesY" : true,
          "svg" : true,
          "config" : [
            { 'name':'svg', 'value':"[[svg]]" },
            { 'name':'axis', 'value':"[[y]]" },
            { 'name':'margin', 'value':basic.marginCode },
            { 'name':'length', 'value':basic.width },
            { 'name':'orientation', 'value': "left" },
            { 'name':'current-domain', 'value':"[[currentDomainY]]" }
          ],
          "basic":basic
        });

// EVENT ###########################################################################################
        demos.push({
          "title": "px-vis-event",
          "descriptionText" : [
            "Chart events use their own dataset. A vertical line is drawn at the x-coordinate and an icon above.",
            "A configuration object can be applied to associate the event label with a desired icon, color, and position. If no configuration is set for a label, a default icon and color are applied.",
            "The icons can either be:",
            "- a Font Awesome class name, e.g. 'fa-camera'",
            "- a Font Awesome unicode, e.g. '\\uf015'",
            "- a url to an image file; png, jpg, gif all work",
            "The colors are px-colors-design colors.",
            "Since each icon / image have a different center point, you may need to specify an offset to center the icon above the line. The offset is a two element array consisiting of an x and y value, '[x,y]'. For images, you'll also have to specify a size",
          ],
          "elemType" : "event",
          "event" : true,
          "svg" : true,
          "config" : [
            { 'name':'svg', 'value':"[[svg]]" },
            { 'name':'event-id', 'value':"[[eventData.id]]" },
            { 'name':'chart-data', 'value':'{ "id": "123", "time": 1397139660000, "label": "Font Awesome" }' },
            { 'name':'x', 'value':"[[x]]" },
            { 'name':'y', 'value':"[[y]]" },
            { 'name':'event-config', 'value':'{\
              "Font Awesome":{\
                "color": "blue",\
                "icon": "fa-camera",\
                "type": "fa",\
                "offset":[0,0]\
              }\
            }' },
            { 'name':'orientation', 'value': "left" },
            { 'name':'current-domain-x', 'value':"[[currentDomainX]]" },
            { 'name':'current-domain-y', 'value':"[[currentDomainY]]" }
          ],
          "basic":JSON.parse(JSON.stringify(basic)),
          "event1": {
            "id": "123",
            "time": 1397139660000,
            "label": "Default"
          },
          "event2": {
            "id": "456",
            "time": 1397248260000,
            "label": "Font Awesome"
          },
          "event3": {
            "id": "789",
            "time": 1397342100000,
            "label": "Unicode"
          },
          "event4": {
            "id": "333",
            "time": 1397458800000,
            "label": "Image"
          },
          "eventConfig": {
            "Font Awesome":{
              "color": "blue",
              "icon": "fa-camera",
              "type": "fa",
              "offset":[0,0]
            },
            "Unicode":{
              "color": "green",
              "icon": "\uf015",
              "type": "unicode",
              "offset":[1,0]
            },
            "Image":{
              "icon": "ge_logo.png",
              "type": "image",
              "offset":[0,-20],
              "size":"20"
            }
          }
        });
        demos[demos.length-1]['basic']['margin']['top'] = 25;

// THRESHOLD #######################################################################################
        demos.push({
          "title": "px-vis-threshold",
          "descriptionText" : [
            "Chart threshold provide horizonal lines across the chart.",
            "A default color is used if no 'for' is specified (of the for does not match a series name). When a valid 'for' is given the threshold color will match that of the series.",
            "The demo chart shows both, one threshold with a valid 'for' and one with no 'for'."

          ],
          "elemType" : "threshold",
          "threshold" : true,
          "svg" : true,
          // "line" : true,
          "config" : [
            { 'name':'svg', 'value':"[[svg]]" },
            { 'name':'chart-data', 'value':'[{ "for":"mySeries", "type":"mean", "value":0.5 }]' },
            { 'name':'x', 'value':"[[x]]" },
            { 'name':'y', 'value':"[[y]]" },
            { 'name':'current-domain-x', 'value':"[[currentDomainX]]" },
            { 'name':'current-domain-y', 'value':"[[currentDomainY]]" }
          ],
          "basic":basic,
          'thresholdData':[
            { "for":"mySeries", "type":"mean", "value":0.5 },
            { "type":"mine", "value":0.25 }]
        });

// NAVIGATOR #######################################################################################
        // demos.push({
        //   "title": "px-vis-chart-navigator",
        //   "descriptionText" : [
        //     "Chart navigator."
        //   ],
        //   "elemType" : "chart-navigator",
        //   "navigator" : true,
        //   "svg" : true,
        //   "config" : [
        //     { 'name':'x-scale', 'value':"time" },
        //     { 'name':'y-scale', 'value':'linear' },
        //     { 'name':'width', 'value':basic.width },
        //     { 'name':'height', 'value':'100' },
        //     { 'name':'margin', 'value':basic.marginCode },
        //     { 'name':'chart-data', 'value': basic.chartDataCode },
        //     { 'name':'chart-domain-x', 'value':"[[currentDomainX]]" },
        //     { 'name':'chart-domain-y', 'value':"[[currentDomainY]]" }
        //   ],
        //   "basic":JSON.parse(JSON.stringify(basic))
        // });
        // demos[demos.length-1]['basic']['chartData'][0]['type'] = "line";
        // demos[demos.length-1]['basic']['chartData'][0]['seriesNumber'] = 0;
        // console.log(demos[demos.length-1]['basic']['chartData'])


// FIN ############################################################################################

        var template = document.querySelector('#demo');
        // The dom-change event signifies when the template has stamped its DOM.
        template.addEventListener('dom-change', function() {
          this.demos = demos;
        });
      </script>
    </body>
</html>
