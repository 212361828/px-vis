<link rel="import" href="../polymer/polymer.html"/>
<link rel="import" href="px-vis-behavior-common.html" />
<link rel="import" href="px-vis-behavior-d3.html" />


<!--
Element providing solution to no problem in particular. As a simple, increments a counter when clicked.

##### Usage

    <px-vis counter-value="1">Hi</px-vis>

@element px-vis
@blurb Element providing solution to no problem in particular.
@homepage index.html
@demo demo.html
-->
<dom-module id="px-vis-zoom">
    <link rel="import" type="css" href="css/px-vis-zoom.css"/>
    <template>
      <button id="resetBtn" class="btn hidden" on-click="resetZoom">Reset Zoom</button>
    </template>
</dom-module>

<script>
  Polymer({

    is: 'px-vis-zoom',

    behaviors: [
      PxVisBehavior.svg,
      PxVisBehavior.extentsData,
      PxVisBehavior.selectedDomain
    ],

    /**
     * Properties block, expose attribute values to the DOM via 'reflect'
     *
     * @property properties
     * @type Object
     */
    properties: {

    },

    observers: [
      'zooooom(extentsData)'
    ],
    attached: function(){
      // TODO generalize this
      var rect = this.svg.node().getBoundingClientRect();
      console.log(rect);
      this.$.resetBtn.style.left = rect.right - 120 - this.margin.right + 'px';
      // TODO if register top then add more....
      this.$.resetBtn.style.top = rect.top + 10 + this.margin.top  + 'px';
    },

    zooooom: function(extentsData) {
      this.set('selectedDomain', extentsData.eX);
      this.fire('px-vis-selected-domain-updated', { 'data':extentsData.eX, 'method': 'set', 'dataVar': 'selectedDomain' });
      this.toggleClass('hidden', false, this.$.resetBtn);
    },
    resetZoom: function(){
      this.set('selectedDomain', ['reset']);
      this.fire('px-vis-selected-domain-updated', { 'data':['reset'], 'method': 'set', 'dataVar': 'selectedDomain' });
      this.toggleClass('hidden', true, this.$.resetBtn);
    }
  });
</script>
