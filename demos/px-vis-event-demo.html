  <script src="../webcomponentsjs/webcomponents-lite.js"></script>
  <link rel="import" href="../px-theme/px-theme.html"/>

  <link rel="import" href="../px-vis-scale.html">
  <link rel="import" href="../px-vis-svg.html">
  <link rel="import" href="../px-vis-event.html">

<dom-module id="px-vis-event-demo">
  <template>
    <template id="demoEvent" is="dom-bind">
      <p class="epsilon demo__title">px-vis-event</p>
      <div class="demo u-p+ flex">
        <div>

          <!-- need for event -->
          <template id="visEvent" is="dom-bind">
            <px-vis-svg
              class="outline"
              width="[[basic.width]]"
              height="[[basic.height]]"
              margin="[[basic.margin]]"
              svg="{{svg}}">
            </px-vis-svg>
            <px-vis-scale
              x-axis-type="time"
              y-axis-type="linear"
              complete-series-config="[[basic.seriesConfig]]"
              chart-extents="[[chartExtents]]"
              width="[[basic.width]]"
              height="[[basic.height]]"
              margin="[[basic.margin]]"
              chart-data={{basic.chartData}}
              x="{{x}}"
              y="{{y}}"
              domain-changed='{{domainChanged}}'
              current-domain-x="{{currentDomainX}}"
              current-domain-y="{{currentDomainY}}"
              selected-domain="[[selectedDomain]]">
            </px-vis-scale>
            <px-vis-event
              svg="[[svg]]"
              x-axis-type="time"
              event-id="[[eventData.event1.id]]"
              event-data="[[eventData.event1]]"
              x="[[x]]"
              y="[[y]]"
              event-config="[[eventConfig]]"
              current-domain-x="[[currentDomainX]]"
              current-domain-y="[[currentDomainY]]">
            </px-vis-event>
            <px-vis-event
              svg="[[svg]]"
              x-axis-type="time"
              event-id="[[eventData.event2.id]]"
              event-data="[[eventData.event2]]"
              x="[[x]]"
              y="[[y]]"
              event-config="[[eventConfig]]"
              current-domain-x="[[currentDomainX]]"
              current-domain-y="[[currentDomainY]]">
            </px-vis-event>
            <px-vis-event
              svg="[[svg]]"
              x-axis-type="time"
              event-id="[[eventData.event3.id]]"
              event-data="[[eventData.event3]]"
              x="[[x]]"
              y="[[y]]"
              event-config="[[eventConfig]]"
              current-domain-x="[[currentDomainX]]"
              current-domain-y="[[currentDomainY]]">
            </px-vis-event>
            <px-vis-event
              svg="[[svg]]"
              x-axis-type="time"
              event-id="[[eventData.event4.id]]"
              event-data="[[eventData.event4]]"
              x="[[x]]"
              y="[[y]]"
              event-config="[[eventConfig]]"
              current-domain-x="[[currentDomainX]]"
              current-domain-y="[[currentDomainY]]">
            </px-vis-event>
          </template>

        </div>
        <div class="demo__discription u-pl+">
          <p class="u-mt0">Chart events use their own dataset. A vertical line is drawn at the x-coordinate and an icon above.</p>
          <p>A configuration object can be applied to associate the event label with a desired icon, color, and position. If no configuration is set for a label, a default icon and color are applied.</p>
          <p>The icons can either be a: </p>
          <ul>
            <li>Font Awesome class name, e.g. 'fa-camera'</li>
            <li>Font Awesome unicode, e.g. '\uf015' </li>
            <li>url to an image file; png, jpg, gif all work</li>
          </ul>
          <p>The colors are px-colors-design colors. </p>
          <p>Since each icon / image have a different center point, you may need to specify an offset to center the icon above the line. The offset is a two element array consisiting of an x and y value, '[x,y]'. For images, you'll also have to specify a size </p>
        </div>
      </div>
      <div>
        <px-demo-snippet
          element-properties="[[elempropEvent]]"
          element-name="px-vis-event">
        </px-demo-snippet>
      </div>

    </template>
  </template>
  <script>
    Polymer({
        is: "px-vis-event-demo"
      });

    window.addEventListener('WebComponentsReady', function() {
      // content for the vis components
      basic = {
        width : 500,
        height : 200,
        margin : {
          "top": 50,
          "right": 10,
          "bottom": 10,
          "left": 10
        },
        chartData : [{
            'x': 1397102460000,
            'y': 0.56
          },{
            'x': 1397139660000,
            'y': 0.4
          },{
            'x': 1397177400000,
            'y': 0.43
          },{
            'x': 1397228040000,
            'y': 0.33
          },{
            'x': 1397248260000,
            'y': 0.47
          },{
            'x': 1397291280000,
            'y': 0.41
          },{
            'x': 1397318100000,
            'y': 0.26
          },{
            'x': 1397342100000,
            'y': 0.42
          },{
            'x': 1397390820000,
            'y': 0.27
          },{
            'x': 1397408100000,
            'y': 0.38
          },{
            'x': 1397458800000,
            'y': 0.36
          },{
            'x': 1397522940000,
            'y': 0.32
        }],
        seriesConfig: {
          'mySeries': {
            "name":"My-Series",
            "type": "line",
            "x": 'x',
            "y": 'y',
            'color': "rgb(93,165,218)"
          }
        }
      },
      chartExtents = {
        "x": [Infinity,-Infinity],
        "y": [0,-Infinity]
      },
      eventData = {
        "event1": {
          "id": "123",
          "x": 1397139660000,
          "label": "Default"
        },
        "event2": {
          "id": "456",
          "x": 1397248260000,
          "label": "Font Awesome"
        },
        "event3": {
          "id": "789",
          "x": 1397342100000,
          "label": "Unicode"
        },
        "event4": {
          "id": "333",
          "x": 1397458800000,
          "label": "Image"
        }
      },
      eventConfig = {
        "Font Awesome":{
          "color": "blue",
          "icon": "fa-camera",
          "type": "fa",
          "offset":[0,0]
        },
        "Unicode":{
          "color": "green",
          "icon": "\uf015",
          "type": "unicode",
          "offset":[1,0]
        },
        "Image":{
          "icon": "ge_logo.png",
          "type": "image",
          "offset":[0,-20],
          "size":"20"
        }
      };

      var templateVisEvent = document.querySelector('#visEvent');
          templateVisEvent.basic = basic;
          templateVisEvent.eventData = eventData;
          templateVisEvent.eventConfig = eventConfig;
          templateVisEvent.chartExtents = chartExtents;

      // content for demo snippet
      var templateDemo = document.querySelector('#demoEvent'),
          elempropEvent = {
            "svg":"[[svg]]",
            "axis":"[[y]]",
            "margin":"[[basic.margin]]",
            "length":"[[basic.height]]",
            "orientation":"left",
            "current-domain":"[[currentDomainY]]"
          };
          templateDemo.elempropEvent = elempropEvent;
      });
  </script>
</dom-module>
